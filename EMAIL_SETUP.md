# é‚®ä»¶å‘é€åŠŸèƒ½é…ç½®æŒ‡å—

## ğŸ“§ é‚®ä»¶æœåŠ¡é…ç½®

### 1. Gmail SMTP é…ç½®

#### æ­¥éª¤1ï¼šå¯ç”¨ä¸¤æ­¥éªŒè¯
1. ç™»å½•æ‚¨çš„Gmailè´¦æˆ·
2. è¿›å…¥ [Googleè´¦æˆ·å®‰å…¨è®¾ç½®](https://myaccount.google.com/security)
3. å¯ç”¨"ä¸¤æ­¥éªŒè¯"

#### æ­¥éª¤2ï¼šç”Ÿæˆåº”ç”¨å¯†ç 
1. åœ¨å®‰å…¨è®¾ç½®ä¸­æ‰¾åˆ°"åº”ç”¨å¯†ç "
2. é€‰æ‹©"é‚®ä»¶"å’Œ"å…¶ä»–è®¾å¤‡"
3. ç”Ÿæˆ16ä½åº”ç”¨å¯†ç ï¼ˆå¦‚ï¼šabcd efgh ijkl mnopï¼‰

#### æ­¥éª¤3ï¼šé…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-16-digit-app-password
PORT=3000
NODE_ENV=production
```

### 2. å…¶ä»–é‚®ä»¶æœåŠ¡é…ç½®

#### Outlook/Hotmail
```javascript
const EMAIL_CONFIG = {
  service: 'hotmail',
  auth: {
    user: 'your-email@outlook.com',
    pass: 'your-password'
  }
};
```

#### è‡ªå®šä¹‰SMTP
```javascript
const EMAIL_CONFIG = {
  host: 'smtp.your-provider.com',
  port: 587,
  secure: false,
  auth: {
    user: 'your-email@domain.com',
    pass: 'your-password'
  }
};
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æœåŠ¡å™¨
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡å™¨
node server.js
```

### 2. æµ‹è¯•é‚®ä»¶å‘é€
```bash
# å‘é€æµ‹è¯•æ–°é—»é‚®ä»¶
node send-newsletter.js
```

### 3. APIç«¯ç‚¹

#### è®¢é˜…é‚®ç®±
```bash
curl -X POST http://localhost:3000/api/subscribe \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com"}'
```

#### å‘é€æ–°é—»é‚®ä»¶
```bash
curl -X POST http://localhost:3000/api/send-newsletter \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æµ‹è¯•æ–°é—»",
    "content": "<h1>æµ‹è¯•å†…å®¹</h1>",
    "date": "2025-01-30"
  }'
```

## ğŸ“Š é‚®ä»¶æ¨¡æ¿

### æ¬¢è¿é‚®ä»¶æ¨¡æ¿
- è‡ªåŠ¨å‘é€ç»™æ–°è®¢é˜…è€…
- åŒ…å«ä¸ªäººä¿¡æ¯å’Œç ”ç©¶æ–¹å‘
- è¯´æ˜è®¢é˜…å†…å®¹å’Œè”ç³»æ–¹å¼

### æ–°é—»é‚®ä»¶æ¨¡æ¿
- å¯è‡ªå®šä¹‰æ ‡é¢˜å’Œå†…å®¹
- æ”¯æŒHTMLæ ¼å¼
- åŒ…å«å–æ¶ˆè®¢é˜…é“¾æ¥

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è®¤è¯å¤±è´¥
```
Error: Invalid login: 535-5.7.8 Username and Password not accepted
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥é‚®ç®±å’Œå¯†ç æ˜¯å¦æ­£ç¡®
- ç¡®ä¿å·²å¯ç”¨ä¸¤æ­¥éªŒè¯
- ä½¿ç”¨åº”ç”¨å¯†ç è€Œéè´¦æˆ·å¯†ç 

#### 2. è¿æ¥è¶…æ—¶
```
Error: Connection timeout
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤SMTPæœåŠ¡å™¨åœ°å€å’Œç«¯å£
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

#### 3. é‚®ä»¶è¢«æ ‡è®°ä¸ºåƒåœ¾é‚®ä»¶
**è§£å†³æ–¹æ¡ˆ**ï¼š
- è®¾ç½®SPFè®°å½•
- é…ç½®DKIMç­¾å
- ä½¿ç”¨ä¸“ä¸šçš„é‚®ä»¶æœåŠ¡

### è°ƒè¯•æ–¹æ³•

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—
```javascript
const transporter = nodemailer.createTransporter({
  ...EMAIL_CONFIG,
  debug: true,
  logger: true
});
```

#### 2. æµ‹è¯•é‚®ä»¶å‘é€
```javascript
// æµ‹è¯•é‚®ä»¶é…ç½®
transporter.verify((error, success) => {
  if (error) {
    console.log('é‚®ä»¶é…ç½®é”™è¯¯:', error);
  } else {
    console.log('é‚®ä»¶é…ç½®æ­£ç¡®ï¼Œå¯ä»¥å‘é€é‚®ä»¶');
  }
});
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ‰¹é‡å‘é€
- ä½¿ç”¨é˜Ÿåˆ—ç³»ç»Ÿå¤„ç†å¤§é‡é‚®ä»¶
- é™åˆ¶å¹¶å‘å‘é€æ•°é‡
- æ·»åŠ å‘é€é—´éš”

### 2. é”™è¯¯å¤„ç†
- è®°å½•å‘é€å¤±è´¥çš„é‚®ä»¶
- å®ç°é‡è¯•æœºåˆ¶
- ç›‘æ§å‘é€æˆåŠŸç‡

### 3. ç›‘æ§å’Œç»Ÿè®¡
- è·Ÿè¸ªé‚®ä»¶æ‰“å¼€ç‡
- ç›‘æ§é€€è®¢ç‡
- åˆ†æç”¨æˆ·è¡Œä¸º

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. æ•°æ®ä¿æŠ¤
- åŠ å¯†å­˜å‚¨è®¢é˜…è€…ä¿¡æ¯
- å®šæœŸå¤‡ä»½æ•°æ®
- éµå®ˆGDPRè§„å®š

### 2. é‚®ä»¶å®‰å…¨
- ä½¿ç”¨TLSåŠ å¯†
- éªŒè¯å‘ä»¶äººèº«ä»½
- é˜²æ­¢é‚®ä»¶ä¼ªé€ 

### 3. éšç§ä¿æŠ¤
- æä¾›å–æ¶ˆè®¢é˜…é€‰é¡¹
- ä¿æŠ¤ç”¨æˆ·éšç§
- éµå®ˆååƒåœ¾é‚®ä»¶æ³•è§„

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- é‚®ç®±ï¼štangyiting007@gmail.com
- GitHubï¼šhttps://github.com/ElizaTang007
